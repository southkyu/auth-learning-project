# ===========================================
# Spring Boot 설정 파일
# ===========================================
#
# 【학습 개념: application.yml】
#
# Spring Boot의 설정 파일입니다:
# - YAML 형식으로 계층적 설정 가능
# - 프로파일별 설정 분리 (dev, prod)
# - 환경변수로 오버라이드 가능

spring:
  application:
    name: auth

  # 데이터베이스 설정
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:auth_learning}
    username: ${DB_USER:southkyu}
    password: ${DB_PASSWORD:}
    driver-class-name: org.postgresql.Driver

  # JPA 설정
  jpa:
    hibernate:
      # 개발 환경: update (스키마 자동 업데이트)
      # 운영 환경: validate (스키마 검증만)
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # Session 저장소 설정 (JDBC)
  session:
    store-type: jdbc
    jdbc:
      initialize-schema: always

server:
  port: ${PORT:3000}

# JWT 설정
jwt:
  secret: ${JWT_SECRET:your-super-secret-jwt-key-change-in-production-min-32-chars}
  expiration: ${JWT_EXPIRES_IN:900000}  # 15분 (밀리초)
  refresh-secret: ${JWT_REFRESH_SECRET:your-refresh-token-secret-key-change-this}
  refresh-expiration: ${JWT_REFRESH_EXPIRES_IN:604800000}  # 7일

# 로깅 설정
logging:
  level:
    com.example.auth: DEBUG
    org.springframework.security: DEBUG
